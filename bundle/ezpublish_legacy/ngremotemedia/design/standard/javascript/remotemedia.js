(function(e){function t(t){for(var i,o,r=t[0],l=t[1],d=t[2],u=0,m=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&m.push(n[o][0]),n[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);c&&c(t);while(m.length)m.shift()();return s.push.apply(s,d||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],i=!0,r=1;r<a.length;r++){var l=a[r];0!==n[l]&&(i=!1)}i&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var i={},n={app:0},s=[];function o(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=i,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(a,i,function(t){return e[t]}.bind(null,i));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var d=0;d<r.length;d++)t(r[d]);var c=l;s.push(["56d7","chunk-vendors"]),a()})({"010a":function(e,t,a){"use strict";var i=a("50ef"),n=a.n(i);n.a},"08c1":function(e,t,a){"use strict";var i=a("677d"),n=a.n(i);n.a},"1e3f":function(e,t,a){},"1e92":function(e,t,a){"use strict";var i=a("91ba"),n=a.n(i);n.a},"262f":function(e,t,a){},3046:function(e,t,a){},"368f":function(e,t,a){"use strict";var i=a("9e64"),n=a.n(i);n.a},"3fb5":function(e,t,a){},4735:function(e,t,a){},"50ef":function(e,t,a){},5338:function(e,t,a){"use strict";var i=a("3046"),n=a.n(i);n.a},"56d7":function(e,t,a){"use strict";a.r(t);a("96cf");var i=a("3b8d"),n=(a("ac6a"),a("cadf"),a("551c"),a("f751"),a("097d"),a("a026")),s=(a("3fb5"),a("6107"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("preview",{ref:"preview",attrs:{"field-id":e.fieldId,"selected-image":e.selectedImage}}),a("div",{staticClass:"ngremotemedia-buttons",attrs:{id:"ngremotemedia-buttons-"+e.fieldId,"data-id":e.fieldId}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedImage.id,expression:"selectedImage.id"}],staticClass:"media-id",attrs:{type:"hidden",name:this.$root.$data.NgRemoteMediaInputFields.resource_id},domProps:{value:e.selectedImage.id},on:{input:function(t){t.target.composing||e.$set(e.selectedImage,"id",t.target.value)}}}),e.isCroppable?a("input",{staticClass:"ngremotemedia-scale hid button",attrs:{type:"button",value:this.$root.$data.NgRemoteMediaTranslations.interactions_scale},on:{click:e.handleCropClicked}}):e._e(),e.selectedImage.id?a("input",{staticClass:"ngremotemedia-remove-file button",attrs:{type:"button",value:this.$root.$data.NgRemoteMediaTranslations.interactions_remove_media},on:{click:e.handleRemoveMediaClicked}}):e._e(),a("input",{staticClass:"ngremotemedia-remote-file button",attrs:{type:"button",value:this.selectedImage.id?this.$root.$data.NgRemoteMediaTranslations.interactions_manage_media:this.$root.$data.NgRemoteMediaTranslations.interactions_select_media},on:{click:e.handleBrowseMediaClicked}}),a("div",{staticClass:"ngremotemedia-local-file-container"},[a("button",{staticClass:"btn btn-default ngremotemedia-local-file button upload-from-disk",attrs:{type:"button"}},[a("Label",{attrs:{for:"new_file"}},[e._v("\n          "+e._s(this.$root.$data.NgRemoteMediaTranslations.interactions_quick_upload)+"\n        ")]),a("input",{ref:"fileInput",attrs:{hidden:"",id:"new_file",name:this.$root.$data.NgRemoteMediaInputFields.new_file,type:"file"},on:{change:e.handleFileInputChange}})],1)])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.stringifiedVariations,expression:"stringifiedVariations"}],staticClass:"media-id",attrs:{type:"hidden",name:this.$root.$data.NgRemoteMediaInputFields.image_variations},domProps:{value:e.stringifiedVariations},on:{input:function(t){t.target.composing||(e.stringifiedVariations=t.target.value)}}}),e.cropModalOpen?a("crop-modal",{attrs:{"selected-image":e.selectedImage,"available-variations":this.$root.$data.NgRemoteMediaAvailableVariations},on:{change:e.handleVariationCropChange,close:e.handleCropModalClose}}):e._e(),e.mediaModalOpen?a("media-modal",{attrs:{tags:e.tags,metadataFields:e.metadataFields,"selected-media-id":e.selectedImage.id,paths:e.config.paths},on:{close:e.handleMediaModalClose,"media-selected":e.handleMediaSelected}}):e._e(),e.uploadModalOpen?a("upload-modal",{attrs:{name:e.selectedImage.name},on:{close:e.handleUploadModalClose,save:e.handleUploadModalSave}}):e._e()],1)}),o=[],r=(a("8e6e"),a("7f7f"),a("28a5"),a("bd86")),l=(a("456d"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.selectedImage.id?a("div",{staticClass:"ngremotemedia-image"},[a("div",{staticClass:"image-wrap"},["raw"!==e.selectedImage.type?a("img",{ref:"image",attrs:{src:e.selectedImage.previewUrl}}):a("i",{staticClass:"ng-icon big",class:e.nonImagePreviewClass})]),a("div",{staticClass:"image-meta"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedImage.type,expression:"selectedImage.type"}],attrs:{type:"hidden",name:this.$root.$data.NgRemoteMediaInputFields.media_type},domProps:{value:e.selectedImage.type},on:{input:function(t){t.target.composing||e.$set(e.selectedImage,"type",t.target.value)}}}),a("h3",{staticClass:"title"},[e._v(e._s(e.selectedImage.name))]),a("p",[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.preview_size)+": "+e._s(e.formattedSize))]),a("p",[e._v(e._s(e.selectedImage.mediaType)+" / "+e._s(e.selectedImage.format))]),a("div",{staticClass:"image-meta-data"},[a("div",{staticClass:"ngremotemedia-alttext"},[a("span",{staticClass:"help-block description"},[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.preview_alternate_text))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedImage.alternateText,expression:"selectedImage.alternateText"}],staticClass:"media-alttext data",attrs:{type:"text",name:this.$root.$data.NgRemoteMediaInputFields.alt_text},domProps:{value:e.selectedImage.alternateText},on:{input:function(t){t.target.composing||e.$set(e.selectedImage,"alternateText",t.target.value)}}})]),a("div",{staticClass:"ngremotemedia-tags"},[a("span",{staticClass:"help-block description"},[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.preview_tags))]),a("v-select",{attrs:{options:e.allTags,multiple:"",taggable:""},on:{input:e.handleTagsInput},model:{value:e.selectedImage.tags,callback:function(t){e.$set(e.selectedImage,"tags",t)},expression:"selectedImage.tags"}}),a("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedImage.tags,expression:"selectedImage.tags"}],staticClass:"ngremotemedia-newtags",attrs:{hidden:"",name:this.$root.$data.NgRemoteMediaInputFields.tags,multiple:"multiple"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.selectedImage,"tags",t.target.multiple?a:a[0])}}},e._l(e.allTags,(function(t){return a("option",{key:t},[e._v(e._s(t))])})),0)],1)])])]):a("div",[a("i",[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.interactions_no_media_selected))])])}),d=[],c=(a("5df3"),a("4f7f"),a("75fc")),u=a("01c8"),m=function(e){var t=[];for(var a in e)t.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return t.join("&")},p=function(e){return e[0].toUpperCase()+e.slice(1)},f=function(e){var t=e.split("-"),a=Object(u["a"])(t),i=a[0],n=a.slice(1);return[i].concat(Object(c["a"])(n.map(p))).join("")},h=function(e,t){var a=Math.pow(10,t);return parseFloat(Math.round(e*a)/a).toFixed(t)},g={B:"KB",KB:"MB",MB:"GB",GB:"TB"},v=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"B",i=g[a];return!i||t<1024?"".concat(h(t,2)," ").concat(a):e(t/1024,i)},b=a("4a7a"),_=a.n(b),y={name:"Preview",props:["fieldId","selectedImage"],data:function(){return{allTags:[]}},components:{"v-select":_.a},computed:{nonImagePreviewClass:function(){return"video"===this.selectedImage.type?"ng-video":"ng-book"},formattedSize:function(){return v(this.selectedImage.size)}},methods:{handleTagsInput:function(e){this.allTags=Object(c["a"])(new Set([].concat(Object(c["a"])(this.allTags),Object(c["a"])(e))))}},mounted:function(){this.allTags=Object(c["a"])(this.selectedImage.tags)},watch:{selectedImage:function(){this.allTags=Object(c["a"])(this.selectedImage.tags)}}},w=y,C=a("2877"),$=Object(C["a"])(w,l,d,!1,null,null,null),M=$.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal",{attrs:{title:this.$root.$data.NgRemoteMediaTranslations.browse_title},on:{close:function(t){return e.$emit("close")}}},[a("media-facets",{attrs:{tags:e.tags,"metadata-fields":e.metadataFields,"media-types":e.mediaTypes,facets:e.facets,"facets-loading":e.facetsLoading},on:{change:e.handleFacetsChange}}),a("media-galery",{attrs:{media:e.media,canLoadMore:e.canLoadMore,selectedMediaId:e.selectedMediaId,loading:e.loading},on:{loadMore:e.handleLoadMore,"media-selected":function(t){return e.$emit("media-selected",t)}}}),e.loading?a("i",{staticClass:"ng-icon ng-spinner"}):e._e()],1)},O=[],T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mediaFacets"},[a("div",{staticClass:"body"},[a("div",{staticClass:"form-field"},[a("label",{attrs:{for:"mediaType"}},[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.browse_select_media_type))]),a("v-select",{attrs:{options:e.mediaTypes,label:"name",reduce:function(e){return e.id},placeholder:this.$root.$data.NgRemoteMediaTranslations.browse_all_media_types},on:{input:e.handleTypeChange},model:{value:e.selectedMediaType,callback:function(t){e.selectedMediaType=t},expression:"selectedMediaType"}})],1),a("div",{staticClass:"form-field"},[a("label",{attrs:{for:"folder"}},[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.browse_select_folder))]),a("treeselect",{attrs:{multiple:!1,options:e.folders,"load-options":e.loadSubFolders,"close-on-select":"true",placeholder:e.facetsLoading?this.$root.$data.NgRemoteMediaTranslations.browse_loading_folders:this.$root.$data.NgRemoteMediaTranslations.browse_all_folders,disabled:e.facetsLoading},on:{input:e.handleFolderChange}})],1),a("div",{staticClass:"form-field"},[a("label",{attrs:{for:"tag"}},[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.browse_select_tag))]),a("v-select",{attrs:{options:e.tags,label:"name",reduce:function(e){return e.id},placeholder:e.facetsLoading?this.$root.$data.NgRemoteMediaTranslations.browse_loading_tags:this.$root.$data.NgRemoteMediaTranslations.browse_all_tags,disabled:e.facetsLoading},on:{input:e.handleTagChange},model:{value:e.tag,callback:function(t){e.tag=t},expression:"tag"}})],1),a("div",{staticClass:"form-field"},[a("label",{attrs:{for:"metadata"}},[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.browse_metadata_fields))]),a("v-select",{attrs:{options:e.metadataFields,label:"label",reduce:function(e){return e.id},placeholder:(e.facetsLoading,this.$root.$data.NgRemoteMediaTranslations.browse_all_metadata_fields),disabled:e.facetsLoading},on:{input:e.handleMetadataChange},model:{value:e.metadata,callback:function(t){e.metadata=t},expression:"metadata"}})],1),a("div",{staticClass:"search-wrapper"},[a("span",{staticClass:"search-label"},[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.search))]),a("div",{staticClass:"search"},[a("ul",{staticClass:"searchType"}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],attrs:{type:"text",placeholder:this.$root.$data.NgRemoteMediaTranslations.search_placeholder},domProps:{value:e.query},on:{keyup:e.handleQueryChange,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),null(t))},input:function(t){t.target.composing||(e.query=t.target.value)}}})])])])])},V=[],x="all",R="image",N="video",k="raw",j="name",S="(all)",F="(root)",E="all",P="all",z=a("ca17"),A=a.n(z),L=(a("542c"),{name:"MediaFacets",props:["tags","metadataFields","facets","facetsLoading","mediaTypes"],data:function(){return{TYPE_ALL:x,TYPE_IMAGE:R,TYPE_VIDEO:N,TYPE_RAW:k,SEARCH_NAME:j,FOLDER_ALL:S,FOLDER_ROOT:F,TAG_ALL:E,METADATA_ALL:P,folders:[{id:F,label:F,children:null}],selectedFolder:this.facets.folder,selectedMediaType:this.facets.mediaType,query:this.facets.query}},methods:{handleSearchChange:function(e){this.$emit("change",{searchType:e})},handleTypeChange:function(e){this.$emit("change",{mediaType:e})},handleFolderChange:function(e){this.selectedFolder=e,this.$emit("change",{folder:this.selectedFolder})},handleQueryChange:function(){this.$emit("change",{query:this.query})},handleTagChange:function(){this.$emit("change",{tag:this.tag})},handleMetadataChange:function(){this.$emit("change",{metadata:this.metadata})},loadSubFolders:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.parentNode,i={folder:a.id},e.next=4,fetch(this.$root.$data.config.paths.load_folders+"?"+m(i));case 4:return n=e.sent,e.next=7,n.json();case 7:a.children=e.sent,t.callback();case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},components:{"v-select":_.a,treeselect:A.a}}),D=L,U=(a("010a"),Object(C["a"])(D,T,V,!1,null,"32bca2b3",null)),B=U.exports,q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mediaGalery"},[a("div",{class:e.loading?"items loading":"items"},[e.media.length?e._e():a("div",{staticClass:"folder-empty"},[a("span",{staticClass:"ngrm-icon-folder"}),a("span",[a("strong",[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.media_galery_empty_folder))]),e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.media_galery_upload_media))])]),e._l(e.media,(function(t){return a("div",{key:t.id,staticClass:"media",class:{selected:t.resourceId===e.selectedMediaId}},["image"===t.mediaType||"video"===t.mediaType&&""!==t.browse_url?a("div",{staticClass:"media-container"},[a("img",{staticClass:"img",attrs:{src:t.browse_url,alt:t.filename}}),a("Label",{staticClass:"filename"},[e._v(e._s(t.filename))]),a("div",{staticClass:"size-description"},[a("span",{staticClass:"format"},[e._v(e._s(t.format))]),e._v(" - "+e._s(t.width)+" x "+e._s(t.height)+" - "+e._s(e.showFilesize(t)))])],1):a("div",{staticClass:"media-container"},[a("span",{staticClass:"file-placeholder"},[a("span",{staticClass:"icon-doc"},["pdf"===t.format?a("i",{staticClass:"fa fa-file-pdf-o"}):"zip"===t.format||"rar"===t.format?a("i",{staticClass:"fa fa-file-archive-o"}):"ppt"===t.format||"pptx"===t.format?a("i",{staticClass:"fa fa-file-powerpoint-o"}):"doc"===t.format||"docx"===t.format?a("i",{staticClass:"fa fa-file-word-o"}):"xls"===t.format||"xlsx"===t.format?a("i",{staticClass:"fa fa-file-excel-o"}):"aac"===t.format||"aiff"===t.format||"amr"===t.format||"flac"===t.format||"m4a"===t.format||"mp3"===t.format||"ogg"===t.format||"opus"===t.format||"wav"===t.format?a("i",{staticClass:"fa fa-file-audio-o"}):"txt"===t.format?a("i",{staticClass:"fa fa-lg fa-file-text"}):a("i",{staticClass:"fa fa-file"})])]),a("Label",{staticClass:"filename"},[e._v(e._s(t.filename))]),a("div",{staticClass:"size-description"},[a("span",{staticClass:"format"},[e._v(e._s(t.format))]),e._v(" - "+e._s(e.showFilesize(t)))])],1),a("button",{staticClass:"btn btn-blue select-btn",attrs:{type:"button"},on:{click:function(a){return e.$emit("media-selected",t)}}},[e._v(e._s(e._self.$root.$data.NgRemoteMediaTranslations.media_galery_select))])])}))],2),e.canLoadMore?a("div",{staticClass:"load-more-wrapper"},[a("button",{staticClass:"btn btn-blue",attrs:{type:"button"},on:{click:function(t){return e.$emit("loadMore")}}},[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.media_galery_load_more))])]):e._e()])},G=[],W=a("94df"),J=a.n(W),Y={name:"MediaGalery",props:["media","canLoadMore","onLoadMore","selectedMediaId","loading"],methods:{showFilesize:function(e){return J()(e.filesize)}}},H=Y,K=(a("1e92"),Object(C["a"])(H,q,G,!1,null,"3f4718a0",null)),Q=K.exports,X=a("b012"),Z=a.n(X),ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"overlay"},[a("div",{staticClass:"media-modal"},[a("div",{staticClass:"title"},[e._v("\n      "+e._s(e.title)+"\n      "),a("span",{staticClass:"close",on:{click:e.close}},[a("span",{staticClass:"ngrm-icon-cancel"})])]),a("div",{staticClass:"body"},[e._t("default")],2)])])},te=[],ae={name:"Modal",props:["title"],methods:{close:function(){this.$emit("close")}}},ie=ae,ne=(a("c6bb"),Object(C["a"])(ie,ee,te,!1,null,"3df2599a",null)),se=ne.exports;function oe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?oe(a,!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oe(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var le=25,de={name:"MediaModal",props:["tags","metadataFields","facetsLoading","selectedMediaId","paths"],components:{"media-facets":B,"media-galery":Q,modal:se},data:function(){return{media:[],canLoadMore:!1,nextCursor:null,loading:!0,facets:{folder:S,searchType:j,mediaType:"",query:"",tag:"",metadata:""},mediaTypes:[{name:this.$root.$data.NgRemoteMediaTranslations.browse_image_and_documents,id:R},{name:this.$root.$data.NgRemoteMediaTranslations.browse_video_and_audio,id:N},{name:this.$root.$data.NgRemoteMediaTranslations.browse_raw,id:k}]}},methods:{debouncedLoad:Z()((function(e){this.load(e)}),500),load:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,i,n,s,o,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{patch:!1},a=t.patch,this.loading=!0,this.abortController&&this.abortController.abort(),this.abortController=new AbortController,console.log(this.facets),i={limit:le,offset:a?this.media.length:0,q:this.facets.query,mediatype:this.facets.mediaType||x,folder:this.facets.folder||S,search_type:this.facets.searchType,next_cursor:a?this.nextCursor:null,tag:this.facets.tag||E,metadata:this.facets.metadata||P},n="".concat(this.paths.browse,"?").concat(m(i)),e.prev=7,e.next=10,fetch(n,{signal:this.abortController.signal});case 10:return s=e.sent,e.next=13,s.json();case 13:o=e.sent,this.media=a?this.media.concat(o.hits):o.hits,this.canLoadMore=o.load_more,this.nextCursor=o.next_cursor,this.loading=!1,e.next=24;break;case 20:if(e.prev=20,e.t0=e["catch"](7),20===e.t0.code){e.next=24;break}throw e.t0;case 24:case"end":return e.stop()}}),e,this,[[7,20]])})));function t(){return e.apply(this,arguments)}return t}(),handleLoadMore:function(){this.debouncedLoad({patch:!0})},handleFacetsChange:function(e){this.facets=re({},this.facets,{},e),this.debouncedLoad()}},mounted:function(){this.load()}},ce=de,ue=(a("d002"),Object(C["a"])(ce,I,O,!1,null,"3d75ad5e",null)),me=ue.exports,pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal",{attrs:{title:"Crop"},on:{close:function(t){return e.$emit("close")}}},[a("crop-sizes",{attrs:{availableVariations:e.availableVariations,allVariationValues:e.allVariationValues,imageSize:e.imageSize,selectedVariation:e.selectedVariation},on:{selected:e.handleVariationSelected,addedVariations:e.handleAddedVariations,removedVariation:e.handleRemovedVariation}}),e._l(e.availableVariations,(function(t,i){return a("div",{key:i,staticClass:"crop-container"},[i===e.selectedVariation?a("crop",{attrs:{value:e.allVariationValues[i],src:e.selectedImage.url,variation:e.availableVariations[i],imageSize:e.imageSize},on:{change:function(t){return e.handleVariationValueChange(i,t)}}}):e._e()],1)})),e.selectedVariation?e._e():a("div",{staticClass:"img-placeholder"},[a("img",{attrs:{src:e.selectedImage.url}})]),a("div",{staticClass:"action-strip"},[a("button",{staticClass:"btn",attrs:{type:"button"},on:{click:e.handleCancelClicked}},[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.crop_cancel))]),a("button",{staticClass:"btn btn-blue",attrs:{type:"button"},on:{click:e.handleSaveClicked}},[a("span",{staticClass:"ngrm-icon-floppy"}),a("span",[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.crop_save_sizes))])])])],2)},fe=[],he=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sidebar-crop"},[a("div",{staticClass:"buttons"},[e.addingVariations?e._e():a("button",{staticClass:"btn",attrs:{type:"button"},on:{click:e.handleAddCropSize}},[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.crop_add_size))]),e.addingVariations?a("button",{staticClass:"btn",attrs:{type:"button"},on:{click:e.handleCancel}},[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.crop_cancel))]):e._e(),e.addingVariations?a("button",{staticClass:"btn crop-btn-add",attrs:{type:"button"},on:{click:e.handleAdd}},[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.crop_add))]):e._e()]),a("div",{staticClass:"sidebar-crop-label"},[a("span",[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.crop_added_for_confirmation))])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.addingVariations,expression:"addingVariations"}],class:{unselectedVariations:e.addingVariations}},e._l(e.unselectedVariations,(function(t){return a("div",{key:t,class:{disabled:!e.isVariationSelectable(t)}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.newSelection,expression:"newSelection"}],attrs:{type:"checkbox",id:t,disabled:!e.isVariationSelectable(t)},domProps:{value:t,checked:Array.isArray(e.newSelection)?e._i(e.newSelection,t)>-1:e.newSelection},on:{change:function(a){var i=e.newSelection,n=a.target,s=!!n.checked;if(Array.isArray(i)){var o=t,r=e._i(i,o);n.checked?r<0&&(e.newSelection=i.concat([o])):r>-1&&(e.newSelection=i.slice(0,r).concat(i.slice(r+1)))}else e.newSelection=s}}}),a("label",{attrs:{for:t}},[a("span",{staticClass:"name"},[e._v(e._s(t))]),a("span",{staticClass:"formatted-size"},[e._v(e._s(e.formattedSize(t)))])]),e.isVariationSelectable(t)?e._e():a("div",{staticClass:"legend-not-selectable"},[a("span",[e._v(e._s(e._self.$root.$data.NgRemoteMediaTranslations.crop_media_too_small))])])])})),0),a("div",{staticClass:"selectedVariations"},[a("ul",e._l(e.selectedVariations,(function(t){return a("li",{key:t,class:{set:!!e.allVariationValues[t],selected:e.selectedVariation===t,disabled:!e.isVariationSelectable(t)},on:{click:function(a){return e.handleVariationClicked(t)}}},[a("div",[a("span",{staticClass:"name"},[e._v(e._s(t))]),a("span",{staticClass:"formatted-size"},[e._v(e._s(e.formattedSize(t)))])]),e.addingVariations?e._e():a("a",{attrs:{href:"#"}},[a("span",{staticClass:"circle-orange"}),a("span",{staticClass:"ngrm-icon-trash",on:{click:function(a){return e.removeItem(t)}}})])])})),0)])])},ge=[],ve=a("768b"),be={name:"CropSizes",props:["availableVariations","allVariationValues","imageSize","selectedVariation"],data:function(){return{newSelection:[],addingVariations:!1}},computed:{unselectedVariations:function(){var e=Object.keys(this.availableVariations),t=Object.keys(this.allVariationValues);return e.difference(t)},selectedVariations:function(){return Object.getOwnPropertyNames(this.allVariationValues)}},methods:{handleAddCropSize:function(){this.addingVariations=!0},handleCancel:function(){this.addingVariations=!1,this.newSelection=[]},handleAdd:function(){this.$emit("addedVariations",this.newSelection),this.newSelection=[],this.addingVariations=!1},removeItem:function(e){this.$emit("removedVariation",e)},formattedSize:function(e){return"".concat(this.availableVariations[e][0]," x ").concat(this.availableVariations[e][1])},isVariationSelectable:function(e){var t=Object(ve["a"])(this.availableVariations[e],2),a=t[0],i=t[1];return this.imageSize.width>=a&&this.imageSize.height>=i},handleVariationClicked:function(e){this.isVariationSelectable(e)&&this.$emit("selected",e)}}},_e=be,ye=(a("63f6"),Object(C["a"])(_e,he,ge,!1,null,"6e62f960",null)),we=ye.exports,Ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"crop"},[a("div",{ref:"cropper",staticClass:"cropper",style:e.cropperStyle},[a("img",{ref:"image",attrs:{src:e.src}}),a("div",{ref:"buttons",staticClass:"buttons",style:e.applyButtonStyle},[a("button",{staticClass:"btn btn-blue",attrs:{type:"button"},on:{click:e.handleReset}},[a("span",{staticClass:"ngrm-icon-ccw"}),a("span",[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.crop_reset))])]),a("button",{staticClass:"btn btn-blue",attrs:{type:"button"},on:{click:e.handleApply}},[a("span",{staticClass:"ngrm-icon-ok"}),a("span",[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.crop_apply))])])])]),a("div",[a("h4",[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.crop_preview))]),a("div",{ref:"preview",staticClass:"preview"})])])},$e=[],Me=a("5435"),Ie={name:"Crop",props:["value","variation","src","imageSize"],mounted:function(){this.setCropper()},beforeDestroy:function(){this.destroyCropper()},data:function(){return{crop:{},cropper:null}},methods:{setCropper:function(){var e,t=this.value||{},a=t.x,i=t.y,n=t.w,s=t.h,o={x:a,y:i,width:n,height:s},l=Object(ve["a"])(this.variation,2),d=l[0],c=l[1],u=d>0&&c>0?d/c:void 0;this.destroyCropper();this.$refs.cropper.clientWidth,this.imageSize.width;this.cropper=new Me["a"](this.$refs.image,(e={viewMode:2,dragMode:"none",autoCrop:!0,data:o,aspectRatio:u,guides:!0,movable:!1,rotatable:!1},Object(r["a"])(e,"guides",!1),Object(r["a"])(e,"center",!1),Object(r["a"])(e,"zoomable",!1),Object(r["a"])(e,"scalable",!0),Object(r["a"])(e,"minCropBoxWidth",50),Object(r["a"])(e,"minCropBoxHeight",50),Object(r["a"])(e,"crop",this.handleCrop),Object(r["a"])(e,"preview",this.$refs.preview),e)),this.cropper.setData(o)},handleCrop:function(e){this.crop=this.cropper.getData(!0)},destroyCropper:function(){this.cropper&&this.cropper.destroy()},handleReset:function(){this.cropper.reset()},handleApply:function(){var e=this.cropper.getData(!0),t=e.x,a=e.y,i=e.width,n=e.height;this.$emit("change",{x:t,y:a,w:i,h:n})}},computed:{applyButtonStyle:function(){var e=this.crop,t=e.x,a=e.y,i=e.width,n=e.height,s=this.$refs.buttons?this.$refs.buttons.clientWidth:0,o=this.$refs.cropper?this.$refs.cropper.clientWidth/this.imageSize.width:1;return{top:"".concat((a+n)*o+10,"px"),left:"".concat((t+i)*o-s-1,"px")}},cropperStyle:function(){var e=this.imageSize.height/this.imageSize.width*100;return{"padding-bottom":"".concat(e,"%"),height:"0px",width:"100%"}}}},Oe=Ie,Te=(a("ad62"),Object(C["a"])(Oe,Ce,$e,!1,null,"5ec8a809",null)),Ve=Te.exports,xe=function(e){return function(t){return Object.keys(t).reduce((function(a,i){return e(t[i],i)&&(a[i]=t[i]),a}),{})}},Re=function(e){return function(t){return!e(t)}},Ne=function(e){return function(t){return e===t}},ke=function(e){return!!e},je=Re(Ne(void 0));function Se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function Fe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Se(a,!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Se(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ee={name:"CropModal",props:["availableVariations","selectedImage"],components:{modal:se,"crop-sizes":we,crop:Ve},data:function(){return{selectedVariation:null,newVariationValues:{}}},computed:{allVariationValues:function(){return xe(je)(Fe({},this.selectedImage.variations,{},this.newVariationValues))},imageSize:function(){return{height:this.selectedImage.height,width:this.selectedImage.width}}},methods:{handleVariationSelected:function(e){this.selectedVariation=e},handleAddedVariations:function(e){this.newVariationValues=Fe({},this.newVariationValues,{},e.reduce((function(e,t){return e[t]=null,e}),{}))},handleRemovedVariation:function(e){this.newVariationValues=Fe({},this.newVariationValues,Object(r["a"])({},e,void 0))},handleVariationValueChange:function(e,t){this.newVariationValues=Fe({},this.newVariationValues,Object(r["a"])({},e,t))},handleCancelClicked:function(){this.newVariationValues={},this.$emit("close")},handleSaveClicked:function(){this.$emit("change",Fe({},this.newVariationValues)),this.newVariationValues={},this.$emit("close")}}},Pe=Ee,ze=(a("08c1"),Object(C["a"])(Pe,pe,fe,!1,null,"30dce429",null)),Ae=ze.exports,Le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal",{attrs:{title:"Upload image"},on:{close:function(t){return e.$emit("close")}}},[a("div",[a("select-folder",{attrs:{"selected-folder":e.selectedFolder},on:{change:e.handleFolderChange}}),a("div",{staticClass:"input-file-name-wrapper"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.newName,expression:"newName"}],attrs:{type:"text"},domProps:{value:e.newName},on:{input:function(t){t.target.composing||(e.newName=t.target.value)}}}),a("button",{staticClass:"btn btn-blue",attrs:{type:"button",disabled:""===e.newName},on:{click:e.handleSaveClick}},[e._v("\n        "+e._s(this.$root.$data.NgRemoteMediaTranslations.upload_button_save)+"\n      ")])])],1)])},De=[],Ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"folderGalery"},[a("div",{class:e.loading?"items loading":"items"},[a("div",{staticClass:"breadcrumbs"},[a("span",[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.upload_breadcrumbs_info))]),a("span",[e.breadcrumbs.length?a("a",{attrs:{href:"#"},on:{click:function(t){return e.loadSubFolders(null)}}},[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.upload_root_folder))]):a("span",[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.upload_root_folder))])]),e._l(e.breadcrumbs,(function(t,i){return a("span",{key:i},[e._v("\n        /\n        "),i!==e.breadcrumbs.length-1?a("a",{attrs:{href:"#"},on:{click:function(a){return e.loadSubFolders(t.id)}}},[e._v("\n          "+e._s(t.label)+"\n        ")]):a("span",[e._v(e._s(t.label))])])}))],2),a("div",{staticClass:"info"},[a("i",{staticClass:"fa fa-info-circle"}),e._v("\n      "+e._s(this.$root.$data.NgRemoteMediaTranslations.upload_info_text)+"\n    ")]),e._l(e.folders,(function(t){return a("div",{key:t.id,staticClass:"media",class:{selected:t.id===e.selectedFolder}},[a("div",{staticClass:"media-container",on:{dblclick:function(a){return e.loadSubFolders(t.id)}}},[e._m(0,!0),a("Label",{staticClass:"filename"},[e._v(e._s(t.label))])],1),a("button",{staticClass:"btn btn-blue select-btn",attrs:{type:"button"},on:{click:function(a){return e.$emit("change",t.id)}}},[e._v("\n        "+e._s(e._self.$root.$data.NgRemoteMediaTranslations.upload_button_select)+"\n      ")])])})),a("div",{staticClass:"media new-folder"},[a("div",{staticClass:"media-container"},[e._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newFolder,expression:"newFolder"}],attrs:{type:"text",placeholder:this.$root.$data.NgRemoteMediaTranslations.upload_placeholder_new_folder},domProps:{value:e.newFolder},on:{input:function(t){t.target.composing||(e.newFolder=t.target.value)}}})]),a("button",{staticClass:"btn btn-blue select-btn",attrs:{type:"button",disabled:null===e.newFolder},on:{click:e.createNewFolder}},[e._v("\n        "+e._s(this.$root.$data.NgRemoteMediaTranslations.upload_button_create)+"\n      ")])])],2),e.loading?a("i",{staticClass:"ng-icon ng-spinner"}):e._e()])},Be=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"file-placeholder"},[a("span",{staticClass:"icon-doc"},[a("i",{staticClass:"fa fa-folder"})])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"file-placeholder"},[a("span",{staticClass:"icon-doc"},[a("i",{staticClass:"fa fa-folder"})])])}],qe=a("bc3a"),Ge=a.n(qe),We={name:"SelectFolder",props:["selectedFolder"],data:function(){return{newFolder:null,breadcrumbs:[],loading:!1}},methods:{loadSubFolders:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,a=this.$root.$data.config.paths.load_folders,null!==t&&(i={folder:t},a+="?"+m(i)),e.next=5,fetch(a);case 5:return n=e.sent,e.next=8,n.json();case 8:this.folders=e.sent,this.generateBreadcrumbs(t),this.newFolder=null,this.loading=!1;case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),generateBreadcrumbs:function(e){var t=this;if(this.breadcrumbs=[],null!==e){var a=e.split("/"),i=[];a.forEach((function(e,a){i.push(e),t.breadcrumbs.push({id:i.join("/"),label:e})}))}},createNewFolder:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,t=this.breadcrumbs.length>0?this.breadcrumbs[this.breadcrumbs.length-1].id:null,a=new FormData,a.append("parent",t),a.append("folder",this.newFolder),e.next=7,Ge.a.post(this.$root.$data.config.paths.create_folder,a);case 7:this.folders.push({id:null!==t?t+"/"+this.newFolder:this.newFolder,label:this.newFolder}),this.newFolder=null,this.loading=!1;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.loadSubFolders(null)}},Je=We,Ye=(a("5338"),Object(C["a"])(Je,Ue,Be,!1,null,"70f9d554",null)),He=Ye.exports,Ke={name:"UploadModal",props:["name"],data:function(){return{selectedFolder:"",newName:this.name}},components:{"select-folder":He,modal:se},methods:{handleFolderChange:function(e){this.selectedFolder=e},handleSaveClick:function(){var e=this.newName;this.selectedFolder&&(e="".concat(this.selectedFolder,"/").concat(this.newName)),this.$emit("save",e)}}},Qe=Ke,Xe=(a("9bfb"),Object(C["a"])(Qe,Le,De,!1,null,"3e6d25e1",null)),Ze=Xe.exports;function et(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function tt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?et(a,!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):et(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var at={name:"Interactions",props:["fieldId","config","selectedImage"],components:{preview:M,"media-modal":me,"crop-modal":Ae,"upload-modal":Ze},computed:{isCroppable:function(){return!!this.selectedImage.id&&"image"===this.selectedImage.mediaType&&Object.keys(this.$root.$data.NgRemoteMediaAvailableVariations).length>0},stringifiedVariations:function(){return JSON.stringify(xe(ke)(this.selectedImage.variations))}},data:function(){return{mediaModalOpen:!1,cropModalOpen:!1,uploadModalOpen:!1,folders:[],tags:[],metadataFields:[],facetsLoading:!0}},methods:{prepareDomForModal:function(){var e=document.querySelector(".ez-page-builder-wrapper");e&&(e.style.transform="none")},resetDomAfterModal:function(){var e=document.querySelector(".ez-page-builder-wrapper");e&&e.removeAttribute("style")},handleMediaModalClose:function(){this.mediaModalOpen=!1,this.resetDomAfterModal()},handleCropModalClose:function(){this.cropModalOpen=!1,this.resetDomAfterModal()},handleUploadModalClose:function(){this.uploadModalOpen=!1},handleEditorInsertModalClose:function(){this.editorInsertModalOpen=!1},handleMediaSelected:function(e){this.selectedImage={id:e.resourceId,name:e.filename,type:e.type,mediaType:e.mediaType,format:e.format,url:e.url,previewUrl:e.preview_url,alternateText:e.alt_text,tags:e.tags,metadataFields:e.metadata,size:e.filesize,variations:{},height:e.height,width:e.width},this.mediaModalOpen=!1},handleVariationCropChange:function(e){this.selectedImage=tt({},this.selectedImage,{variations:tt({},this.selectedImage.variations,{},e)})},handleUploadModalSave:function(e){this.selectedImage=tt({},this.selectedImage,{name:e,id:e}),this.uploadModalOpen=!1},handleCropClicked:function(){this.cropModalOpen=!0,this.prepareDomForModal()},handleRemoveMediaClicked:function(){this.selectedImage={id:"",name:"",type:"image",mediaType:"image",format:"",url:"",previewUrl:"",alternateText:"",tags:[],metadataFields:[],size:0,variations:{},height:0,width:0},this.$refs.fileInput.value=null},fetchFacets:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.config.paths.load_facets);case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,this.tags=a.tags,this.metadataFields=a.metadataFields,this.facetsLoading=!1,console.log(this.metadataFields);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleBrowseMediaClicked:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.mediaModalOpen=!0,this.prepareDomForModal(),this.fetchFacets();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getFileType:function(e){var t=e.type.split("/")[0];return"video"!==t?"image":t},getFileMediaType:function(e){var t=e.type.split("/")[0];return"video"!==t&&"image"!==t?"other":t},getFileFormat:function(e){return e.type.split("/")[1]},handleFileInputChange:function(e){this.uploadModalOpen=!0;var t=e.target.files.item(0);if(t&&(this.selectedImage={id:t.name,name:t.name,type:this.getFileType(t),mediaType:this.getFileMediaType(t),format:this.getFileFormat(t),url:"",previewUrl:"",alternateText:"",tags:[],metadataFields:[],size:t.size,variations:{},height:0,width:0},"image"===this.selectedImage.mediaType)){var a=new FileReader;a.addEventListener("load",function(){this.$refs.preview.$refs.image.onload=function(){this.selectedImage.width=this.$refs.preview.$refs.image.naturalWidth,this.selectedImage.height=this.$refs.preview.$refs.image.naturalHeight}.bind(this),this.selectedImage.url=a.result,this.selectedImage.previewUrl=a.result}.bind(this),!1),a.readAsDataURL(t)}}},watch:{selectedImage:function(){this.$emit("selectedImageChanged",this.selectedImage)}}},it=at,nt=Object(C["a"])(it,s,o,!1,null,null,null),st=nt.exports,ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal",{staticClass:"editor-insert-modal",attrs:{title:this.$root.$data.NgRemoteMediaTranslations.editor_insert_title},on:{close:function(t){return e.$emit("close")}}},[a("div",{class:e.loading?"editor-insert-modal-body loading":"editor-insert-modal-body"},[a("interactions",{attrs:{"field-id":e.fieldId,config:e.config,"selected-image":e.selectedImage},on:{selectedImageChanged:e.handleSelectedImageChanged}}),a("div",{staticClass:"form-field"},[a("label",{attrs:{for:"selected_variation_"+e.fieldId}},[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.editor_insert_variations_label))]),a("v-select",{attrs:{id:"selected_variation_"+e.fieldId,options:this.$root.$data.NgRemoteMediaAvailableEditorVariations,placeholder:this.$root.$data.NgRemoteMediaTranslations.editor_insert_variations_original_image},model:{value:e.selectedEditorVariation,callback:function(t){e.selectedEditorVariation=t},expression:"selectedEditorVariation"}})],1),a("div",{staticClass:"form-field"},[a("label",{attrs:{for:"caption_"+e.fieldId}},[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.editor_insert_caption_label))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.caption,expression:"caption"}],staticClass:"media-alttext data",attrs:{type:"text",id:"caption_"+e.fieldId,name:"Caption"},domProps:{value:e.caption},on:{input:function(t){t.target.composing||(e.caption=t.target.value)}}})]),a("div",{staticClass:"form-field"},[a("label",{attrs:{for:"selected_variation_"+e.fieldId}},[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.editor_insert_align_label))]),a("v-select",{attrs:{id:"selected_variation_"+e.fieldId,options:this.$root.$data.NgRemoteMediaAvailableAlignOptions,reduce:function(e){return e.code}},model:{value:e.align,callback:function(t){e.align=t},expression:"align"}})],1),a("div",{staticClass:"form-field"},[a("label",{attrs:{for:"css_class_"+e.fieldId}},[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.editor_insert_css_class_label))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.cssClass,expression:"cssClass"}],staticClass:"media-alttext data",attrs:{type:"text",id:"css_class_"+e.fieldId,name:"Caption"},domProps:{value:e.cssClass},on:{input:function(t){t.target.composing||(e.cssClass=t.target.value)}}})]),e.loading?a("i",{staticClass:"ng-icon ng-spinner"}):e._e()],1),a("div",{staticClass:"action-strip"},[a("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){return e.$emit("close")}}},[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.editor_insert_cancel_button))]),a("button",{staticClass:"btn btn-blue",attrs:{type:"button"},on:{click:this.handleEditorInsertModalSave}},[a("span",[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.editor_insert_insert_button))])])])])},rt=[],lt={name:"EditorInsertModal",props:["loading","fieldId","config","selectedImage","selectedEditorVariation","caption","align","cssClass"],components:{modal:se,interactions:st,"v-select":_.a},methods:{handleEditorInsertModalSave:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,t=new FormData,t.append("resource_id",this.selectedImage.id),t.append("media_type",this.selectedImage.type),t.append("alt_text",this.selectedImage.alternateText),t.append("new_file",document.querySelector('input[name="'+this.$root.$data.NgRemoteMediaInputFields.new_file+'"]').files[0]),t.append("image_variations",JSON.stringify(this.selectedImage.variations)),t.append("variation",this.selectedEditorVariation),this.selectedImage.tags.forEach((function(e){t.append("tags[]",e)})),e.next=11,Ge.a.post(this.$root.$data.config.paths.editor_insert,t);case 11:a=e.sent,this.$root.$data.editorInsertCallback(a.data,this.caption,this.align,this.cssClass),this.$emit("close");case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleSelectedImageChanged:function(e){this.selectedImage=e}}},dt=lt,ct=(a("368f"),Object(C["a"])(dt,ot,rt,!1,null,"8c9540dc",null)),ut=ct.exports,mt={bind:function(e,t,a){var i=f(t.arg);a.context[i]=t.value}};a("b39d");n["default"].config.productionTip=!1;var pt=function(){document.querySelectorAll(".ngremotemedia-type").forEach((function(e,t){window["remoteMedia".concat(e.dataset.id)]=new n["default"]({el:e,directives:{init:mt},data:{NgRemoteMediaTranslations:NgRemoteMediaTranslations,NgRemoteMediaSelectedImage:window["NgRemoteMediaSelectedImage_".concat(e.dataset.id)],NgRemoteMediaConfig:NgRemoteMediaConfig,NgRemoteMediaInputFields:window["NgRemoteMediaInputFields_".concat(e.dataset.id)],NgRemoteMediaAvailableVariations:window["NgRemoteMediaAvailableVariations_".concat(e.dataset.id)],NgRemoteMediaAvailableEditorVariations:window["NgRemoteMediaAvailableEditorVariations_".concat(e.dataset.id)],NgRemoteMediaAvailableAlignOptions:NgRemoteMediaAvailableAlignOptions,editorInsertModalOpen:!1,editorInsertModalLoading:!1,editorInsertCallback:null,selectedEditorVariation:"",caption:"",align:"",cssClass:"",selectedImage:{id:"",name:"",type:"image",mediaType:"image",format:"",url:"",browse_url:"",previewUrl:"",alternateText:"",tags:[],size:"",variations:{},height:0,width:0},config:{paths:{},availableVariations:{}}},components:{interactions:st,"editor-insert-modal":ut},methods:{setEditorInsertCallback:function(e){this.editorInsertCallback=e},handleEditorInsertModalClose:function(){this.editorInsertModalLoading=!1,this.editorInsertModalOpen=!1},openEditorInsertModal:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=t||{},this.editorInsertModalLoading=!0,this.editorInsertModalOpen=!0,this.selectedImage={id:"",name:"",type:"image",mediaType:"image",format:"",url:"",previewUrl:"",browse_url:"",alternateText:"",tags:[],size:"",variations:{},height:0,width:0},this.caption="",this.align="",this.cssClass="",this.selectedEditorVariation="",a={},"undefined"!==typeof t.image_variations&&(a=t.image_variations),"undefined"===typeof t.resourceType||null===t.resourceType||"undefined"===typeof t.resourceId||null===t.resourceId){e.next=18;break}return e.next=13,fetch(this.config.paths.editor_fetch+"?resource_type="+t.resourceType+"&resource_id="+t.resourceId);case 13:return i=e.sent,e.next=16,i.json();case 16:n=e.sent,this.selectedImage={id:n.resourceId,name:n.filename,type:n.type,mediaType:n.mediaType,format:n.format,url:n.url,previewUrl:n.preview_url,alternateText:n.alt_text,tags:n.tags,size:n.filesize,variations:a,height:n.height,width:n.width};case 18:"undefined"!==typeof t.caption&&(this.caption=t.caption),"undefined"!==typeof t.align&&(this.align=t.align),"undefined"!==typeof t.cssclass&&(this.cssClass=t.cssclass),"undefined"!==typeof t.variation&&(this.selectedEditorVariation=t.variation),this.editorInsertModalLoading=!1;case 23:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}})}))};"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?pt():document.addEventListener("DOMContentLoaded",pt)},"5cb6":function(e,t,a){},"63f6":function(e,t,a){"use strict";var i=a("4735"),n=a.n(i);n.a},"677d":function(e,t,a){},"8ffc":function(e,t,a){},"91ba":function(e,t,a){},"9bfb":function(e,t,a){"use strict";var i=a("5cb6"),n=a.n(i);n.a},"9e64":function(e,t,a){},ad62:function(e,t,a){"use strict";var i=a("8ffc"),n=a.n(i);n.a},b39d:function(e,t){Array.prototype.difference||(Array.prototype.difference=function(e){return this.filter((function(t){return e.indexOf(t)<0}))})},c6bb:function(e,t,a){"use strict";var i=a("262f"),n=a.n(i);n.a},d002:function(e,t,a){"use strict";var i=a("1e3f"),n=a.n(i);n.a}});
//# sourceMappingURL=app.js.map