(function(e){function t(t){for(var i,o,l=t[0],r=t[1],c=t[2],f=0,u=[];f<l.length;f++)o=l[f],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&u.push(s[o][0]),s[o]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);d&&d(t);while(u.length)u.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],i=!0,l=1;l<a.length;l++){var r=a[l];0!==s[r]&&(i=!1)}i&&(n.splice(t--,1),e=o(o.s=a[0]))}return e}var i={},s={app:0},n=[];function o(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=i,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(a,i,function(t){return e[t]}.bind(null,i));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var d=r;n.push(["56d7","chunk-vendors"]),a()})({"0ab7":function(e,t,a){"use strict";var i=a("dca1"),s=a.n(i);s.a},1994:function(e,t,a){},"1c87":function(e,t,a){},"2d36":function(e,t,a){},3601:function(e,t,a){},"3fb5":function(e,t,a){},"4d22":function(e,t,a){"use strict";var i=a("5450"),s=a.n(i);s.a},5450:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var i=a("a026"),s=a("2b88"),n=a.n(s),o=a("d1d6"),l=a.n(o),r=(a("3fb5"),a("6107"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("preview",{ref:"preview",attrs:{config:e.config,"field-id":e.fieldId,"selected-image":e.selectedImage,"is-croppable":e.isCroppable},on:{"preview-change":e.dispatchVanillaChangeEvent}}),a("div",{staticClass:"ngremotemedia-buttons",attrs:{id:"ngremotemedia-buttons-"+e.fieldId,"data-id":e.fieldId}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedImage.id,expression:"selectedImage.id"}],staticClass:"media-id",attrs:{name:this.config.inputFields.remoteId,type:"hidden"},domProps:{value:e.selectedImage.id},on:{input:function(t){t.target.composing||e.$set(e.selectedImage,"id",t.target.value)}}}),e.isCroppable?a("input",{staticClass:"ngremotemedia-scale hid btn",attrs:{value:this.config.translations.interactions_scale,type:"button"},on:{click:e.handleCropClicked}}):e._e(),e.selectedImage.id?a("input",{staticClass:"ngremotemedia-remove-file btn",attrs:{value:this.config.translations.interactions_remove_media,type:"button"},on:{click:e.handleRemoveMediaClicked}}):e._e(),a("input",{staticClass:"ngremotemedia-remote-file btn",attrs:{value:this.selectedImage.id?this.config.translations.interactions_manage_media:this.config.translations.interactions_select_media,type:"button"},on:{click:e.handleBrowseMediaClicked}}),this.config.disableUpload?e._e():a("div",{staticClass:"ngremotemedia-local-file-container"},[a("button",{staticClass:"btn btn-default ngremotemedia-local-file btn upload-from-disk",attrs:{type:"button"}},[a("Label",{attrs:{for:e.fieldId+"_file_upload"}},[e._v("\n                    "+e._s(this.config.translations.interactions_quick_upload)+"\n                ")]),a("input",{ref:"fileUploadInput",attrs:{id:e.fieldId+"_file_upload",name:this.config.inputFields.new_file,hidden:"",type:"file"},on:{change:e.handleFileInputChange}})],1)])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.stringifiedVariations,expression:"stringifiedVariations"}],staticClass:"media-id",attrs:{name:this.config.inputFields.cropSettings,type:"hidden"},domProps:{value:e.stringifiedVariations},on:{input:function(t){t.target.composing||(e.stringifiedVariations=t.target.value)}}}),a("portal",{attrs:{to:"ngrm-body-modal-"+e.fieldId}},[e.cropModalOpen?a("crop-modal",{attrs:{"available-variations":this.config.availableVariations,"selected-image":e.selectedImage,translations:e.config.translations},on:{change:e.handleVariationCropChange,close:e.handleCropModalClose}}):e._e(),e.mediaModalOpen?a("media-modal",{attrs:{config:e.config,paths:e.config.paths,"selected-media-id":e.selectedImage.id,tags:e.tags,types:e.types,visibilities:e.visibilities},on:{close:e.handleMediaModalClose,"media-selected":e.handleMediaSelected}}):e._e(),e.uploadModalOpen?a("upload-modal",{attrs:{config:e.config,file:e.newFile,visibilities:e.visibilities},on:{close:e.handleUploadModalClose,uploaded:e.handleResourceUploaded}}):e._e()],1),a("portal-target",{class:"ngrm-model-portal-"+e.fieldId,attrs:{name:"ngrm-body-modal-"+e.fieldId}})],1)}),c=[],d=(a("8e6e"),a("96cf"),a("3b8d")),f=a("bd86"),u=(a("ac6a"),a("456d"),function(){var e=this,t=this,a=t.$createElement,i=t._self._c||a;return t.selectedImage.id?i("div",{staticClass:"ngremotemedia-image"},[i("div",{staticClass:"image-wrap"},["image"===t.selectedImage.type||"video"===t.selectedImage.type?i("img",{ref:"image",attrs:{src:t.selectedImage.previewUrl}}):i("span",{staticClass:"file-placeholder"},[i("span",{staticClass:"icon-doc"},["pdf"===t.selectedImage.format?i("i",{staticClass:"fa fa-file-pdf-o"}):"zip"===t.selectedImage.format||"rar"===t.selectedImage.format?i("i",{staticClass:"fa fa-file-archive-o"}):"ppt"===t.selectedImage.format||"pptx"===t.selectedImage.format?i("i",{staticClass:"fa fa-file-powerpoint-o"}):"doc"===t.selectedImage.format||"docx"===t.selectedImage.format?i("i",{staticClass:"fa fa-file-word-o"}):"xls"===t.selectedImage.format||"xlsx"===t.selectedImage.format?i("i",{staticClass:"fa fa-file-excel-o"}):"aac"===t.selectedImage.format||"aiff"===t.selectedImage.format||"amr"===t.selectedImage.format||"flac"===t.selectedImage.format||"m4a"===t.selectedImage.format||"mp3"===t.selectedImage.format||"ogg"===t.selectedImage.format||"opus"===t.selectedImage.format||"wav"===t.selectedImage.format?i("i",{staticClass:"fa fa-file-audio-o"}):"txt"===t.selectedImage.format?i("i",{staticClass:"fa fa-lg fa-file-text"}):i("i",{staticClass:"fa fa-file"})])])]),i("div",{staticClass:"image-meta"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedImage.type,expression:"selectedImage.type"}],attrs:{type:"hidden",name:this.config.inputFields.type},domProps:{value:t.selectedImage.type},on:{input:function(e){e.target.composing||t.$set(t.selectedImage,"type",e.target.value)}}}),i("h3",{staticClass:"title"},[t._v(t._s(t.selectedImage.name))]),i("p",[t._v(t._s(this.config.translations.preview_size)+": "+t._s(t.formattedSize))]),i("p",[t._v(t._s(t.selectedImage.type)+" / "+t._s(t.selectedImage.format))]),i("div",{staticClass:"image-meta-data"},[i("div",{staticClass:"ngremotemedia-alttext"},[i("span",{staticClass:"help-block description"},[t._v("\n            "+t._s(this.config.translations.preview_alternate_text)+"\n            "),i("i",{staticClass:"fa fa-info-circle",attrs:{"data-toggle":"tooltip","data-placement":"right",title:this.config.translations.preview_alternate_text_info}})]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedImage.alternateText,expression:"selectedImage.alternateText"},{name:"debounce",rawName:"v-debounce:500ms",value:function(){return t.dispatchChangeEvent(e.config.inputFields.altText)},expression:"() => dispatchChangeEvent(this.config.inputFields.altText)",arg:"500ms"}],staticClass:"media-alttext data",attrs:{type:"text",name:this.config.inputFields.altText},domProps:{value:t.selectedImage.alternateText},on:{input:function(e){e.target.composing||t.$set(t.selectedImage,"alternateText",e.target.value)}}})]),i("div",{staticClass:"ngremotemedia-caption"},[i("span",{staticClass:"help-block description"},[t._v("\n            "+t._s(this.config.translations.preview_caption)+"\n            "),i("i",{staticClass:"fa fa-info-circle",attrs:{"data-toggle":"tooltip","data-placement":"right",title:this.config.translations.preview_caption_info}})]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedImage.caption,expression:"selectedImage.caption"},{name:"debounce",rawName:"v-debounce:500ms",value:function(){return t.dispatchChangeEvent(e.config.inputFields.caption)},expression:"() => dispatchChangeEvent(this.config.inputFields.caption)",arg:"500ms"}],staticClass:"media-caption data",attrs:{type:"text",name:this.config.inputFields.caption},domProps:{value:t.selectedImage.caption},on:{input:function(e){e.target.composing||t.$set(t.selectedImage,"caption",e.target.value)}}})]),i("div",{staticClass:"ngremotemedia-tags"},[i("span",{staticClass:"help-block description"},[t._v("\n            "+t._s(this.config.translations.preview_tags)+"\n            "),i("i",{staticClass:"fa fa-info-circle",attrs:{"data-toggle":"tooltip","data-placement":"right",title:this.config.translations.preview_tags_info}})]),i("v-select",{attrs:{options:t.config.allowedTags.length>0?t.config.allowedTags:t.allTags,multiple:"",taggable:0===t.config.allowedTags.length},on:{input:t.handleTagsInput},model:{value:t.selectedImage.tags,callback:function(e){t.$set(t.selectedImage,"tags",e)},expression:"selectedImage.tags"}}),i("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedImage.tags,expression:"selectedImage.tags"}],staticClass:"ngremotemedia-newtags",attrs:{hidden:"",name:this.config.inputFields.tags,multiple:"multiple"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));t.$set(t.selectedImage,"tags",e.target.multiple?a:a[0])}}},t._l(t.allTags,(function(e){return i("option",{key:e},[t._v(t._s(e))])})),0)],1),i("div",{staticClass:"ngremotemedia-watermark-text"},[i("span",{staticClass:"help-block description"},[t._v("\n          "+t._s(this.config.translations.preview_watermark_text)+"\n          "),i("i",{staticClass:"fa fa-info-circle",attrs:{"data-toggle":"tooltip","data-placement":"right",title:this.config.translations.preview_watermark_text_info}})]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedImage.watermarkText,expression:"selectedImage.watermarkText"},{name:"debounce",rawName:"v-debounce:500ms",value:function(){return t.dispatchChangeEvent(e.config.inputFields.watermarkText)},expression:"() => dispatchChangeEvent(this.config.inputFields.watermarkText)",arg:"500ms"}],staticClass:"media-watermarktext data",attrs:{type:"text",name:this.config.inputFields.watermarkText},domProps:{value:t.selectedImage.watermarkText},on:{input:function(e){e.target.composing||t.$set(t.selectedImage,"watermarkText",e.target.value)}}})]),this.isEmbed?i("div",{staticClass:"ngremotemedia-css-class"},[i("span",{staticClass:"help-block description"},[t._v("\n          "+t._s(this.config.translations.preview_css_class)+"\n          "),this.config.translations.preview_css_class_info?i("i",{staticClass:"fa fa-info-circle",attrs:{"data-toggle":"tooltip","data-placement":"right",title:this.config.translations.preview_css_class_info}}):t._e()]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedImage.cssClass,expression:"selectedImage.cssClass"},{name:"debounce",rawName:"v-debounce:500ms",value:function(){return t.dispatchChangeEvent(e.config.inputFields.cssClass)},expression:"() => dispatchChangeEvent(this.config.inputFields.cssClass)",arg:"500ms"}],staticClass:"media-css-class data",attrs:{type:"text",name:this.config.inputFields.cssClass},domProps:{value:t.selectedImage.cssClass},on:{input:function(e){e.target.composing||t.$set(t.selectedImage,"cssClass",e.target.value)}}})]):t._e(),this.isEmbed&&this.hasVariations?i("div",{staticClass:"ngremotemedia-selected-variation"},[i("input",{attrs:{type:"hidden",name:this.config.inputFields.selectedVariation},domProps:{value:t.selectedImage.selectedVariation}}),i("span",{staticClass:"help-block description"},[t._v("\n            "+t._s(this.config.translations.preview_selected_variation)+"\n            "),this.config.translations.preview_selected_variation_info?i("i",{staticClass:"fa fa-info-circle",attrs:{"data-toggle":"tooltip","data-placement":"right",title:this.config.translations.preview_selected_variation_info}}):t._e()]),i("v-select",{attrs:{options:this.variationOptions},on:{input:function(){return t.dispatchChangeEvent(e.config.inputFields.selectedVariation)}},model:{value:t.selectedImage.selectedVariation,callback:function(e){t.$set(t.selectedImage,"selectedVariation",e)},expression:"selectedImage.selectedVariation"}})],1):t._e()])])]):i("div",[i("i",[t._v(t._s(this.config.translations.interactions_no_media_selected))])])}),p=[],h=(a("5df3"),a("4f7f"),a("75fc")),m=(a("28a5"),a("01c8")),g=function(e){var t=[];for(var a in e)t.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return t.join("&")},v=function(e){return e[0].toUpperCase()+e.slice(1)},b=function(e){var t=e.split("-"),a=Object(m["a"])(t),i=a[0],s=a.slice(1);return[i].concat(Object(h["a"])(s.map(v))).join("")},_=function(e,t){var a=Math.pow(10,t);return parseFloat(Math.round(e*a)/a).toFixed(t)},w={B:"KB",KB:"MB",MB:"GB",GB:"TB"},y=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"B",i=w[a];return!i||t<1024?"".concat(_(t,2)," ").concat(a):e(t/1024,i)},C=a("4a7a"),x=a.n(C),F={name:"Preview",props:["config","fieldId","selectedImage"],data:function(){return{allTags:[]}},components:{"v-select":x.a},computed:{nonImagePreviewClass:function(){return"video"===this.selectedImage.type?"ng-video":"ng-book"},formattedSize:function(){return y(this.selectedImage.size)},isEmbed:function(){return"embed"===this.config.mode},hasVariations:function(){return this.config.allVariations.length>0},variationOptions:function(){return this.config.allVariations.map((function(e){return{label:e,value:e}}))}},methods:{handleTagsInput:function(e){this.allTags=Object(h["a"])(new Set([].concat(Object(h["a"])(this.allTags),Object(h["a"])(e)))),this.dispatchChangeEvent(this.config.inputFields.tags)},dispatchChangeEvent:function(e){this.$emit("preview-change",e)}},mounted:function(){this.allTags=Object(h["a"])(this.selectedImage.tags)},watch:{selectedImage:function(){this.allTags=Object(h["a"])(this.selectedImage.tags)}}},O=F,I=(a("0ab7"),a("2877")),V=Object(I["a"])(O,u,p,!1,null,"7b7e2b48",null),k=V.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal",{attrs:{title:this.config.translations.browse_title},on:{close:function(t){return e.$emit("close")}}},[a("media-facets",{attrs:{config:e.config,tags:e.tags,types:e.types,visibilities:e.visibilities,facets:e.facets,"facets-loading":e.facetsLoading},on:{change:e.handleFacetsChange}}),a("media-gallery",{attrs:{translations:e.config.translations,media:e.media,canLoadMore:e.canLoadMore,selectedMediaId:e.selectedMediaId,loading:e.loading},on:{loadMore:e.handleLoadMore,"media-selected":function(t){return e.$emit("media-selected",t)}}}),e.loading?a("i",{staticClass:"ng-icon ng-spinner"}):e._e()],1)},S=[],M=a("768b"),T=(a("ffc1"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mediaFacets"},[a("div",{staticClass:"body"},[e.types.length>1?a("div",{staticClass:"form-field"},[a("label",{attrs:{for:"type"}},[e._v(e._s(this.config.translations.browse_select_type))]),a("v-select",{attrs:{options:e.types,label:"name",reduce:function(e){return e.id},placeholder:e.facetsLoading?this.config.translations.browse_loading_types:this.config.translations.browse_all_types},on:{input:e.handleTypeChange},model:{value:e.selectedType,callback:function(t){e.selectedType=t},expression:"selectedType"}})],1):e._e(),e.folders&&!this.config.folder?a("div",{staticClass:"form-field"},[a("label",{attrs:{for:"folder"}},[e._v(e._s(this.config.translations.browse_select_folder))]),a("treeselect",{attrs:{multiple:!1,options:e.folders,"load-options":e.loadSubFolders,value:this.config.parentFolder?this.config.parentFolder.id:"",placeholder:e.facetsLoading?this.config.translations.browse_loading_folders:this.config.translations.browse_all_folders,disabled:e.facetsLoading,clearable:!0,beforeClearAll:e.clearFolderField,defaultExpandLevel:1},on:{input:e.handleFolderChange},model:{value:e.selectedFolder,callback:function(t){e.selectedFolder=t},expression:"selectedFolder"}})],1):e._e(),e.tags.length>1?a("div",{staticClass:"form-field"},[a("label",{attrs:{for:"tag"}},[e._v(e._s(this.config.translations.browse_select_tag))]),a("v-select",{attrs:{options:e.tags,label:"name",reduce:function(e){return e.id},placeholder:e.facetsLoading?this.config.translations.browse_loading_tags:this.config.translations.browse_all_tags,disabled:e.facetsLoading},on:{input:e.handleTagChange},model:{value:e.tag,callback:function(t){e.tag=t},expression:"tag"}})],1):e._e(),e.visibilities.length>1?a("div",{staticClass:"form-field"},[a("label",{attrs:{for:"visibilities"}},[e._v(e._s(this.config.translations.browse_select_visibility))]),a("v-select",{attrs:{options:e.visibilities,label:"name",reduce:function(e){return e.id},placeholder:e.facetsLoading?this.config.translations.browse_loading_visibilities:this.config.translations.browse_all_visibilities,disabled:e.facetsLoading},on:{input:e.handleVisibilityChange},model:{value:e.visibility,callback:function(t){e.visibility=t},expression:"visibility"}})],1):e._e(),a("div",{staticClass:"search-wrapper"},[a("span",{staticClass:"search-label"},[e._v(e._s(this.config.translations.search))]),a("div",{staticClass:"search"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],attrs:{type:"text",placeholder:this.config.translations.search_placeholder},domProps:{value:e.query},on:{keyup:e.handleQueryChange,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),null(t))},input:function(t){t.target.composing||(e.query=t.target.value)}}})])])])])}),E=[],$="all",P="image",z="video",R="raw",L="(all)",A="(root)",U="all",D=a("ca17"),N=a.n(D),B=(a("542c"),{name:"MediaFacets",props:["config","tags","types","visibilities","facets","facetsLoading"],data:function(){return{TYPE_ALL:$,TYPE_IMAGE:P,TYPE_VIDEO:z,TYPE_RAW:R,FOLDER_ALL:L,FOLDER_ROOT:A,TAG_ALL:U,folders:[{id:this.config.parentFolder?this.config.parentFolder.id:A,label:this.config.parentFolder?this.config.parentFolder.label:A,children:null}],selectedFolder:this.facets.folder,selectedType:this.facets.type,query:this.facets.query,tag:this.facets.tag,visibility:this.facets.visibility}},methods:{clearFolderField:function(){return!this.config.parentFolder||(this.selectedFolder=this.config.parentFolder.id,!1)},handleTypeChange:function(e){this.$emit("change",{type:e})},handleFolderChange:function(e){this.selectedFolder=e,"undefined"!==typeof e&&e||(this.selectedFolder=this.config.parentFolder?this.config.parentFolder.id:e),this.$emit("change",{folder:this.selectedFolder})},handleQueryChange:function(){this.$emit("change",{query:this.query})},handleTagChange:function(){this.$emit("change",{tag:this.tag})},handleVisibilityChange:function(){this.$emit("change",{visibility:this.visibility})},loadSubFolders:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.parentNode,i={folder:"(root)"===a.id?"":a.id},e.next=4,fetch(this.config.paths.load_folders+"?"+g(i));case 4:return s=e.sent,e.next=7,s.json();case 7:a.children=e.sent,t.callback();case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},components:{"v-select":x.a,treeselect:N.a}}),q=B,G=(a("c345"),Object(I["a"])(q,T,E,!1,null,"278bb214",null)),W=G.exports,Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"media-gallery"},[a("div",{class:e.loading?"items loading":"items"},[e.media.length?e._e():a("div",{staticClass:"folder-empty"},[a("span",{staticClass:"ngrm-icon-folder"}),a("span",[a("strong",[e._v(e._s(this.translations.media_gallery_empty_folder))]),e._v(e._s(this.translations.media_gallery_upload_media))])]),e._l(e.media,(function(t){return a("div",{key:t.id,staticClass:"media",class:{selected:t.remoteId===e.selectedMediaId}},["image"===t.type||"video"===t.type&&""!==t.browseUrl?a("div",{staticClass:"media-container"},[a("img",{staticClass:"img",attrs:{src:t.browseUrl,alt:t.filename}}),a("Label",{staticClass:"filename"},[e._v(e._s(t.filename))]),a("div",{staticClass:"size-description"},["public"===t.visibility?a("i",{staticClass:"fa fa-solid fa-globe"},[e._v("  ")]):e._e(),"private"===t.visibility?a("i",{staticClass:"fa fa-eye-slash"},[e._v("  ")]):e._e(),"protected"===t.visibility?a("i",{staticClass:"fa fa-lock"},[e._v("  ")]):e._e(),a("span",{staticClass:"format"},[e._v(e._s(t.format))]),e._v(" - "+e._s(t.width)+" x "+e._s(t.height)+" - "+e._s(e.showFilesize(t))+"\n        ")])],1):a("div",{staticClass:"media-container"},[a("span",{staticClass:"file-placeholder"},[a("span",{staticClass:"icon-doc"},["pdf"===t.format?a("i",{staticClass:"fa fa-file-pdf-o"}):"zip"===t.format||"rar"===t.format?a("i",{staticClass:"fa fa-file-archive-o"}):"ppt"===t.format||"pptx"===t.format?a("i",{staticClass:"fa fa-file-powerpoint-o"}):"doc"===t.format||"docx"===t.format?a("i",{staticClass:"fa fa-file-word-o"}):"xls"===t.format||"xlsx"===t.format?a("i",{staticClass:"fa fa-file-excel-o"}):"aac"===t.format||"aiff"===t.format||"amr"===t.format||"flac"===t.format||"m4a"===t.format||"mp3"===t.format||"ogg"===t.format||"opus"===t.format||"wav"===t.format?a("i",{staticClass:"fa fa-file-audio-o"}):"txt"===t.format?a("i",{staticClass:"fa fa-lg fa-file-text"}):a("i",{staticClass:"fa fa-file"})])]),a("Label",{staticClass:"filename"},[e._v(e._s(t.filename))]),a("div",{staticClass:"size-description"},["public"===t.visibility?a("i",{staticClass:"fa fa-solid fa-globe"},[e._v("  ")]):e._e(),"private"===t.visibility?a("i",{staticClass:"fa fa-eye-slash"},[e._v("  ")]):e._e(),"protected"===t.visibility?a("i",{staticClass:"fa fa-lock"},[e._v("  ")]):e._e(),a("span",{staticClass:"format"},[e._v(e._s(t.format))]),e._v(" - "+e._s(e.showFilesize(t))+"\n        ")])],1),a("button",{staticClass:"btn btn-blue select-btn",attrs:{type:"button"},on:{click:function(a){return e.$emit("media-selected",t)}}},[e._v(e._s(e._self.translations.media_gallery_select))])])}))],2),e.canLoadMore?a("div",{staticClass:"load-more-wrapper"},[a("button",{staticClass:"btn btn-blue",attrs:{type:"button"},on:{click:function(t){return e.$emit("loadMore")}}},[e._v(e._s(this.translations.media_gallery_load_more))])]):e._e()])},J=[],K=a("94df"),Q=a.n(K),H={name:"MediaGallery",props:["translations","media","canLoadMore","onLoadMore","selectedMediaId","loading"],methods:{showFilesize:function(e){return Q()(e.size)}}},X=H,Z=(a("bdf2"),Object(I["a"])(X,Y,J,!1,null,"5aa52c90",null)),ee=Z.exports,te=a("b012"),ae=a.n(te),ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ngrm-overlay"},[a("div",{staticClass:"media-modal"},[a("div",{staticClass:"title"},[e._v("\n      "+e._s(e.title)+"\n      "),a("span",{staticClass:"close",on:{click:e.close}},[a("span",{staticClass:"ngrm-icon-cancel"})])]),a("div",{staticClass:"body"},[e._t("default")],2)])])},se=[],ne={name:"Modal",props:["title"],methods:{close:function(){this.$emit("close")}}},oe=ne,le=(a("7397"),a("a301"),Object(I["a"])(oe,ie,se,!1,null,"03fd1c54",null)),re=le.exports;function ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function de(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ce(a,!0).forEach((function(t){Object(f["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ce(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var fe=25,ue={name:"MediaModal",props:["config","tags","types","visibilities","facetsLoading","selectedMediaId","paths"],components:{"media-facets":W,"media-gallery":ee,modal:re},data:function(){var e=null;return this.config.parentFolder&&(e=this.config.parentFolder.id),this.config.folder&&(e=this.config.folder.id),{media:[],canLoadMore:!1,nextCursor:null,loading:!0,facets:{folder:e,type:"",query:"",tag:"",visibility:""}}},methods:{debouncedLoad:ae()((function(e){this.load(e)}),500),load:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t,a,i,s,n,o,l,r,c,d,f,u,p=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(t=p.length>0&&void 0!==p[0]?p[0]:{patch:!1},a=t.patch,this.loading=!0,this.abortController&&this.abortController.abort(),this.abortController=new AbortController,i={limit:fe,offset:a?this.media.length:0},this.facets.query&&(i["query"]=this.facets.query),this.config.allowedTypes.length>0&&(i["type"]=this.config.allowedTypes),this.facets.type&&(i["type"]=this.facets.type),this.facets.folder&&(i["folder"]=this.facets.folder===A?"":this.facets.folder),this.config.allowedTags.length>0&&(i["tag"]=this.config.allowedTags),this.facets.tag&&(i["tag"]=this.facets.tag),this.config.allowedVisibilities.length>0&&(i["visibility"]=this.config.allowedVisibilities),this.facets.visibility&&(i["visibility"]=this.facets.visibility),a&&this.nextCursor&&(i["next_cursor"]=this.nextCursor),s="",n=0,o=Object.entries(i);n<o.length;n++)l=Object(M["a"])(o[n],2),r=l[0],c=l[1],""!==s&&(s+="&"),c.constructor===Array?(s+=r+"[]=",s+=c.join("&"+r+"[]=")):s+=r+"="+c;return d="".concat(this.paths.browse_resources,"?").concat(encodeURI(s)),e.prev=17,e.next=20,fetch(d,{signal:this.abortController.signal});case 20:return f=e.sent,e.next=23,f.json();case 23:u=e.sent,this.media=a?this.media.concat(u.hits):u.hits,this.canLoadMore=u.load_more,this.nextCursor=u.next_cursor,this.loading=!1,e.next=34;break;case 30:if(e.prev=30,e.t0=e["catch"](17),20===e.t0.code){e.next=34;break}throw e.t0;case 34:case"end":return e.stop()}}),e,this,[[17,30]])})));function t(){return e.apply(this,arguments)}return t}(),handleLoadMore:function(){this.debouncedLoad({patch:!0})},handleFacetsChange:function(e){this.facets=de({},this.facets,{},e),this.debouncedLoad()}},mounted:function(){this.load()}},pe=ue,he=(a("ab92"),Object(I["a"])(pe,j,S,!1,null,"751395c8",null)),me=he.exports,ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal",{attrs:{title:this.translations.crop_modal_title},on:{close:function(t){return e.$emit("close")}}},[a("crop-sizes",{attrs:{translations:e.translations,availableVariations:e.availableVariations,allVariationValues:e.allVariationValues,imageSize:e.imageSize,selectedVariation:e.selectedVariation},on:{selected:e.handleVariationSelected,addedVariations:e.handleAddedVariations,removedVariation:e.handleRemovedVariation}}),e._l(e.availableVariations,(function(t,i){return a("div",{key:i,staticClass:"crop-container"},[i===e.selectedVariation?a("crop",{attrs:{translations:e.translations,value:e.allVariationValues[i],src:e.selectedImage.url,variation:e.availableVariations[i],imageSize:e.imageSize},on:{change:function(t){return e.handleVariationValueChange(i,t)}}}):e._e()],1)})),e.selectedVariation?e._e():a("div",{staticClass:"img-placeholder"},[a("img",{attrs:{src:e.selectedImage.url}})]),a("div",{staticClass:"action-strip"},[a("button",{staticClass:"btn",attrs:{type:"button"},on:{click:e.handleCancelClicked}},[e._v(e._s(this.translations.crop_cancel))]),a("button",{staticClass:"btn btn-blue",attrs:{type:"button"},on:{click:e.handleSaveClicked}},[a("span",{staticClass:"ngrm-icon-floppy"}),a("span",[e._v(e._s(this.translations.crop_save_sizes))])])])],2)},ve=[],be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sidebar-crop"},[a("div",{staticClass:"buttons"},[e.addingVariations?e._e():a("button",{staticClass:"btn",attrs:{type:"button"},on:{click:e.handleAddCropSize}},[e._v(e._s(this.translations.crop_add_size))]),e.addingVariations?a("button",{staticClass:"btn",attrs:{type:"button"},on:{click:e.handleCancel}},[e._v(e._s(this.translations.crop_cancel))]):e._e(),e.addingVariations?a("button",{staticClass:"btn crop-btn-add",attrs:{type:"button"},on:{click:e.handleAdd}},[e._v(e._s(this.translations.crop_add))]):e._e()]),a("div",{staticClass:"sidebar-crop-label"},[a("span",[e._v(e._s(this.translations.crop_added_for_confirmation))])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.addingVariations,expression:"addingVariations"}],class:{unselectedVariations:e.addingVariations}},e._l(e.unselectedVariations,(function(t){return a("div",{key:t,class:{disabled:!e.isVariationSelectable(t)}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.newSelection,expression:"newSelection"}],attrs:{type:"checkbox",id:t,disabled:!e.isVariationSelectable(t)},domProps:{value:t,checked:Array.isArray(e.newSelection)?e._i(e.newSelection,t)>-1:e.newSelection},on:{change:function(a){var i=e.newSelection,s=a.target,n=!!s.checked;if(Array.isArray(i)){var o=t,l=e._i(i,o);s.checked?l<0&&(e.newSelection=i.concat([o])):l>-1&&(e.newSelection=i.slice(0,l).concat(i.slice(l+1)))}else e.newSelection=n}}}),a("label",{attrs:{for:t}},[a("span",{staticClass:"name"},[e._v(e._s(t))]),a("span",{staticClass:"formatted-size"},[e._v(e._s(e.formattedSize(t)))])]),e.isVariationSelectable(t)?e._e():a("div",{staticClass:"legend-not-selectable"},[a("span",[e._v(e._s(e._self.translations.crop_media_too_small))])])])})),0),a("div",{staticClass:"selectedVariations"},[a("ul",e._l(e.selectedVariations,(function(t){return a("li",{key:t,class:{set:!!e.allVariationValues[t],selected:e.selectedVariation===t,disabled:!e.isVariationSelectable(t)},on:{click:function(a){return e.handleVariationClicked(t)}}},[a("div",[a("span",{staticClass:"name"},[e._v(e._s(t))]),a("span",{staticClass:"formatted-size"},[e._v(e._s(e.formattedSize(t)))])]),e.addingVariations?e._e():a("a",[a("span",{staticClass:"circle-orange"}),a("span",{staticClass:"ngrm-icon-trash",on:{click:function(a){return e.removeItem(t)}}})])])})),0)])])},_e=[],we=(a("7f7f"),{name:"CropSizes",props:["translations","availableVariations","allVariationValues","imageSize","selectedVariation"],data:function(){return{newSelection:[],addingVariations:!1}},computed:{unselectedVariations:function(){var e=Object.keys(this.availableVariations),t=Object.keys(this.allVariationValues);return e.difference(t)},selectedVariations:function(){return Object.getOwnPropertyNames(this.allVariationValues)}},methods:{handleAddCropSize:function(){this.addingVariations=!0},handleCancel:function(){this.addingVariations=!1,this.newSelection=[]},handleAdd:function(){this.$emit("addedVariations",this.newSelection),this.newSelection=[],this.addingVariations=!1},removeItem:function(e){this.$emit("removedVariation",e)},formattedSize:function(e){return"".concat(this.availableVariations[e][0]," x ").concat(this.availableVariations[e][1])},isVariationSelectable:function(e){var t=Object(M["a"])(this.availableVariations[e],2),a=t[0],i=t[1];return this.imageSize.width>=a&&this.imageSize.height>=i},handleVariationClicked:function(e){this.isVariationSelectable(e)&&this.$emit("selected",e)}}}),ye=we,Ce=(a("bdd7"),Object(I["a"])(ye,be,_e,!1,null,"ad171770",null)),xe=Ce.exports,Fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"crop"},[a("div",{ref:"cropper",staticClass:"cropper",style:e.cropperStyle},[a("img",{ref:"image",attrs:{src:e.src}}),a("div",{ref:"buttons",staticClass:"buttons",style:e.applyButtonStyle},[a("button",{staticClass:"btn btn-blue",attrs:{type:"button"},on:{click:e.handleReset}},[a("span",{staticClass:"ngrm-icon-ccw"}),a("span",[e._v(e._s(this.translations.crop_reset))])]),a("button",{staticClass:"btn btn-blue",attrs:{type:"button"},on:{click:e.handleApply}},[a("span",{staticClass:"ngrm-icon-ok"}),a("span",[e._v(e._s(this.translations.crop_apply))])])])]),a("div",[a("h4",[e._v(e._s(this.translations.crop_preview))]),a("div",{ref:"preview",staticClass:"preview"})])])},Oe=[],Ie=a("5435"),Ve={name:"Crop",props:["translations","value","variation","src","imageSize"],mounted:function(){this.setCropper()},beforeDestroy:function(){this.destroyCropper()},data:function(){return{crop:{},cropper:null}},methods:{setCropper:function(){var e,t=this.value||{},a=t.x,i=t.y,s=t.w,n=t.h,o={x:a,y:i,width:s,height:n},l=Object(M["a"])(this.variation,2),r=l[0],c=l[1],d=r>0&&c>0?r/c:void 0;this.destroyCropper();this.$refs.cropper.clientWidth,this.imageSize.width;this.cropper=new Ie["a"](this.$refs.image,(e={viewMode:2,dragMode:"none",autoCrop:!0,data:o,aspectRatio:d,guides:!0,movable:!1,rotatable:!1},Object(f["a"])(e,"guides",!1),Object(f["a"])(e,"center",!1),Object(f["a"])(e,"zoomable",!1),Object(f["a"])(e,"scalable",!0),Object(f["a"])(e,"minCropBoxWidth",50),Object(f["a"])(e,"minCropBoxHeight",50),Object(f["a"])(e,"crop",this.handleCrop),Object(f["a"])(e,"preview",this.$refs.preview),e)),this.cropper.setData(o)},handleCrop:function(e){this.crop=this.cropper.getData(!0)},destroyCropper:function(){this.cropper&&this.cropper.destroy()},handleReset:function(){this.cropper.reset()},handleApply:function(){var e=this.cropper.getData(!0),t=e.x,a=e.y,i=e.width,s=e.height;this.$emit("change",{x:t,y:a,w:i,h:s})}},computed:{applyButtonStyle:function(){var e=this.crop,t=e.x,a=e.y,i=e.width,s=e.height,n=this.$refs.buttons?this.$refs.buttons.clientWidth:0,o=this.$refs.cropper?this.$refs.cropper.clientWidth/this.imageSize.width:1;return{top:"".concat((a+s)*o+10,"px"),left:"".concat((t+i)*o-n-1,"px")}},cropperStyle:function(){var e=this.imageSize.height/this.imageSize.width*100;return{"padding-bottom":"".concat(e,"%"),height:"0px",width:"100%"}}}},ke=Ve,je=(a("c66d"),Object(I["a"])(ke,Fe,Oe,!1,null,"5f73791e",null)),Se=je.exports,Me=function(e){return function(t){return Object.keys(t).reduce((function(a,i){return e(t[i],i)&&(a[i]=t[i]),a}),{})}},Te=function(e){return function(t){return!e(t)}},Ee=function(e){return function(t){return e===t}},$e=function(e){return!!e},Pe=Te(Ee(void 0));function ze(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function Re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ze(a,!0).forEach((function(t){Object(f["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ze(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Le={name:"CropModal",props:["translations","availableVariations","selectedImage"],components:{modal:re,"crop-sizes":xe,crop:Se},data:function(){return{selectedVariation:null,newVariationValues:{}}},computed:{allVariationValues:function(){return Me(Pe)(Re({},this.selectedImage.variations,{},this.newVariationValues))},imageSize:function(){return{height:this.selectedImage.height,width:this.selectedImage.width}}},methods:{handleVariationSelected:function(e){this.selectedVariation=e},handleAddedVariations:function(e){this.newVariationValues=Re({},this.newVariationValues,{},e.reduce((function(e,t){return e[t]=null,e}),{}))},handleRemovedVariation:function(e){this.newVariationValues=Re({},this.newVariationValues,Object(f["a"])({},e,void 0))},handleVariationValueChange:function(e,t){this.newVariationValues=Re({},this.newVariationValues,Object(f["a"])({},e,t))},handleCancelClicked:function(){this.newVariationValues={},this.$emit("close")},handleSaveClicked:function(){this.$emit("change",Re({},this.newVariationValues)),this.newVariationValues={},this.$emit("close")}}},Ae=Le,Ue=(a("4d22"),Object(I["a"])(Ae,ge,ve,!1,null,"45497070",null)),De=Ue.exports,Ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal",{attrs:{title:this.config.translations.upload_modal_title},on:{close:function(t){return e.$emit("close")}}},[a("div",{class:e.loading?"loading":""},[a("select-folder",{attrs:{config:e.config,"selected-folder":e.selectedFolder},on:{select:e.handleFolderChange,change:e.handleFolderChange}}),a("div",{staticClass:"input-file-name-wrapper"},[this.error?a("div",{staticClass:"error"},[e._v("\n        "+e._s(this.error)+"\n        "),this.existingResourceButton?a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){return e.$emit("uploaded",e.existingResource)}}},[e._v("\n          "+e._s(this.config.translations.upload_button_use_existing_resource)+"\n        ")]):e._e()]):e._e(),a("input",{directives:[{name:"model",rawName:"v-model",value:e.filename,expression:"filename"}],class:e.error?"error":"",attrs:{type:"text"},domProps:{value:e.filename},on:{input:function(t){t.target.composing||(e.filename=t.target.value)}}}),e.visibilities.length>1?a("v-select",{attrs:{options:e.visibilities,label:"name",reduce:function(e){return e.id},clearable:!1},model:{value:e.visibility,callback:function(t){e.visibility=t},expression:"visibility"}}):e._e(),a("input",{directives:[{name:"model",rawName:"v-model",value:e.overwrite,expression:"overwrite"}],attrs:{type:"checkbox",id:"ngrm-upload-overwrite"},domProps:{checked:Array.isArray(e.overwrite)?e._i(e.overwrite,null)>-1:e.overwrite},on:{change:function(t){var a=e.overwrite,i=t.target,s=!!i.checked;if(Array.isArray(a)){var n=null,o=e._i(a,n);i.checked?o<0&&(e.overwrite=a.concat([n])):o>-1&&(e.overwrite=a.slice(0,o).concat(a.slice(o+1)))}else e.overwrite=s}}}),a("label",{attrs:{for:"ngrm-upload-overwrite"}},[e._v(e._s(this.config.translations.upload_checkbox_overwrite))]),a("button",{staticClass:"btn btn-blue",attrs:{type:"button",disabled:""===e.filename||""===e.visibility},on:{click:e.upload}},[e._v("\n        "+e._s(this.config.translations.upload_button_upload)+"\n      ")])],1)],1),e.loading?a("i",{staticClass:"ng-icon ng-spinner"}):e._e()])},Be=[],qe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"folder-gallery"},[a("div",{class:e.loading?"items loading":"items"},[a("div",{staticClass:"breadcrumbs"},[a("span",[e._v(e._s(this.config.translations.upload_breadcrumbs_info)+" ")]),e._l(e.breadcrumbs,(function(t,i){return a("span",{key:i},[0!==i?a("span",[e._v(" / ")]):e._e(),i!==e.breadcrumbs.length-1?a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(a){return e.openFolder(t.id)}}},[e._v("\n          "+e._s(t.label)+"\n        ")]):a("span",[e._v(e._s(t.label))])])}))],2),e.folders.length>0||e.allowCreate?a("div",{staticClass:"info"},[a("i",{staticClass:"fa fa-info-circle"}),e._v("\n      "+e._s(this.config.translations.upload_info_text)+"\n    ")]):e._e(),e._l(e.folders,(function(t){return a("div",{key:t.id,staticClass:"media",class:{selected:t.id===e._self.folder}},[a("div",{staticClass:"media-container",on:{dblclick:function(a){return e.openFolder(t.id)}}},[e._m(0,!0),a("Label",{staticClass:"filename"},[e._v(e._s(t.label))])],1),a("button",{staticClass:"btn btn-blue select-btn",attrs:{type:"button"},on:{click:function(a){return e.$emit("select",t.id)}}},[e._v("\n        "+e._s(e._self.config.translations.upload_button_select)+"\n      ")])])})),e.allowCreate?a("div",{staticClass:"media new-folder"},[a("div",{staticClass:"media-container"},[e._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newFolder,expression:"newFolder"}],attrs:{type:"text",placeholder:this.config.translations.upload_placeholder_new_folder},domProps:{value:e.newFolder},on:{input:function(t){t.target.composing||(e.newFolder=t.target.value)}}})]),a("button",{staticClass:"btn btn-blue select-btn",attrs:{type:"button",disabled:null===e.newFolder},on:{click:e.createNewFolder}},[e._v("\n        "+e._s(this.config.translations.upload_button_create)+"\n      ")])]):e._e()],2),e.loading?a("i",{staticClass:"ng-icon ng-spinner"}):e._e()])},Ge=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"file-placeholder"},[a("span",{staticClass:"icon-doc"},[a("i",{staticClass:"fa fa-folder"})])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"file-placeholder"},[a("span",{staticClass:"icon-doc"},[a("i",{staticClass:"fa fa-folder"})])])}],We=a("bc3a"),Ye=a.n(We),Je={name:"SelectFolder",props:["config","selectedFolder"],data:function(){return{folders:[],newFolder:null,breadcrumbs:[],loading:!1,allowCreate:!0,folder:this.selectedFolder}},methods:{openFolder:function(e){this.folder=e,this.$emit("change",this.folder),this.loadSubFolders(e)},loadSubFolders:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,a=this.config.paths.load_folders,t&&(i={folder:t===A?"":t},a+="?"+g(i)),e.next=5,fetch(a);case 5:return s=e.sent,e.next=8,s.json();case 8:this.folders=e.sent,this.generateBreadcrumbs(t),this.newFolder=null,this.loading=!1;case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),generateBreadcrumbs:function(e){var t=this;this.breadcrumbs=[];var a={id:null,label:this.config.translations.upload_root_folder};if(null!==e){var i=e.split("/"),s=[],n=[];this.config.parentFolder&&(n=this.config.parentFolder.id.split("/"),a={id:this.config.parentFolder.id,label:this.config.parentFolder.label}),this.config.folder&&(n=this.config.folder.id.split("/"),a={id:this.config.folder.id,label:this.config.folder.label}),this.breadcrumbs.push(a),i.forEach((function(e,a){s.push(e),n.indexOf(e)<0&&t.breadcrumbs.push({id:s.join("/"),label:e})}))}else this.breadcrumbs.push(a)},createNewFolder:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,t=new FormData,this.folder&&t.append("parent",this.folder),t.append("folder",this.newFolder),e.next=6,Ye.a.post(this.config.paths.create_folder,t);case 6:this.folders.push({id:null!==this.folder?this.folder+"/"+this.newFolder:this.newFolder,label:this.newFolder}),this.newFolder=null,this.loading=!1;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){if(this.config.folder)return e=this.config.folder.id,this.allowCreate=!1,this.folder=e,this.$emit("change",this.folder),void this.generateBreadcrumbs(e);var e=null;this.config.parentFolder&&(e=this.config.parentFolder.id),this.openFolder(e)}},Ke=Je,Qe=(a("85ab"),Object(I["a"])(Ke,qe,Ge,!1,null,"c53732c8",null)),He=Qe.exports,Xe={name:"UploadModal",props:["config","file","visibilities"],data:function(){return{loading:!1,selectedFolder:"",filename:this.file.name,visibility:this.visibilities.length>0?this.visibilities[0].id:"",overwrite:!1,error:"",existingResourceButton:!1,existingResource:null}},components:{"select-folder":He,modal:re,"v-select":x.a},methods:{handleFolderChange:function(e){this.selectedFolder=e},upload:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t,a,i,s,n,o,l=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(this.loading=!0,t=new FormData,t.append("file",this.file),t.append("filename",this.filename),t.append("folder",this.selectedFolder),t.append("overwrite",this.overwrite),t.append("visibility",this.visibility),t.append("hide_filename",this.config.hideFilename),a=0,i=Object.entries(this.config.uploadContext);a<i.length;a++)s=Object(M["a"])(i[a],2),n=s[0],o=s[1],t.append("upload_context[".concat(n,"]"),o);return e.next=11,Ye.a.post(this.config.paths.upload_resources,t).then((function(e){l.config.allowedTypes.length>0&&-1===l.config.allowedTypes.indexOf(e.data.type)?(l.error=l.config.translations.upload_error_unsupported_resource_type+l.config.allowedTypes.join(", "),l.loading=!1):l.$emit("uploaded",e.data)})).catch((function(e){409===e.response.status?(l.error=l.config.translations.upload_error_existing_resource,l.existingResourceButton=!0,l.existingResource=e.response.data,l.loading=!1):(l.error=e.response.data.detail?e.response.data.detail:"Error "+e.response.status+" - "+e.response.statusText,l.loading=!1)}));case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},watch:{visibilities:function(){this.visibility=this.visibilities.length>0?this.visibilities[0].id:""}}},Ze=Xe,et=(a("5af5"),Object(I["a"])(Ze,Ne,Be,!1,null,"2676fd5e",null)),tt=et.exports;function at(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function it(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?at(a,!0).forEach((function(t){Object(f["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):at(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var st={name:"Interactions",props:["fieldId","config","selectedImage"],components:{preview:k,"media-modal":me,"crop-modal":De,"upload-modal":tt},computed:{isCroppable:function(){return!!this.selectedImage.id&&"image"===this.selectedImage.type&&Object.keys(this.config.availableVariations).length>0},stringifiedVariations:function(){return JSON.stringify(Me($e)(this.selectedImage.variations))}},data:function(){return{mediaModalOpen:!1,cropModalOpen:!1,uploadModalOpen:!1,types:[],folders:[],tags:[],visibilities:[],facetsLoading:!0,newFile:null}},methods:{dispatchVanillaChangeEvent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"modal";this.$nextTick((function(){this.$el.dispatchEvent(new CustomEvent("ngrm-change",{detail:{inputFields:this.config.inputFields,selectedImage:this.selectedImage,fieldId:this.fieldId,changedField:e},bubbles:!0}))}))},prepareDomForModal:function(){var e=document.querySelector(".ez-page-builder-wrapper");e&&(e.style.transform="none")},resetDomAfterModal:function(){var e=document.querySelector(".ez-page-builder-wrapper");e&&e.removeAttribute("style")},handleMediaModalClose:function(){this.mediaModalOpen=!1,this.resetDomAfterModal(),this.dispatchVanillaChangeEvent()},handleCropModalClose:function(){this.cropModalOpen=!1,this.resetDomAfterModal(),this.dispatchVanillaChangeEvent()},handleUploadModalClose:function(){this.uploadModalOpen=!1,this.dispatchVanillaChangeEvent()},handleMediaSelected:function(e){this.selectedImage={id:e.remoteId,name:e.filename,type:e.type,format:e.format,url:e.url,previewUrl:e.previewUrl,browseUrl:e.browseUrl,alternateText:e.altText,caption:e.caption,watermarkText:this.selectedImage.watermarkText,tags:e.tags,size:e.size,variations:{},height:e.height,width:e.width,selectedVariation:null,cssClass:""},this.mediaModalOpen=!1,this.dispatchVanillaChangeEvent()},handleVariationCropChange:function(e){this.selectedImage=it({},this.selectedImage,{variations:it({},this.selectedImage.variations,{},e)}),this.dispatchVanillaChangeEvent()},handleResourceUploaded:function(e){this.selectedImage={id:e.remoteId,name:e.filename,type:e.type,format:e.format,url:e.url,previewUrl:e.previewUrl,browseUrl:e.browseUrl,alternateText:e.altText,caption:e.caption,watermarkText:this.selectedImage.watermarkText,tags:e.tags,size:e.size,variations:{},height:e.height,width:e.width,selectedVariation:null,cssClass:""},this.uploadModalOpen=!1,this.dispatchVanillaChangeEvent()},handleCropClicked:function(){this.cropModalOpen=!0,this.prepareDomForModal()},handleRemoveMediaClicked:function(){this.selectedImage={id:"",name:"",type:"image",format:"",url:"",previewUrl:"",browseUrl:"",alternateText:"",caption:"",watermarkText:this.selectedImage.watermarkText,tags:[],size:0,variations:{},height:0,width:0,selectedVariation:null,cssClass:""},this.config.disableUpload||(this.$refs.fileUploadInput.value=null),this.dispatchVanillaChangeEvent()},fetchFacets:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t,a,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.config.paths.load_facets);case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,this.types=[],this.tags=[],this.visibilities=[],a.types.forEach((function(e){-1===i.config.allowedTypes.indexOf(e.id)&&0!==i.config.allowedTypes.length||i.types.push(e)})),a.tags.forEach((function(e){-1===i.config.allowedTags.indexOf(e.id)&&0!==i.config.allowedTags.length||i.tags.push(e)})),a.visibilities.forEach((function(e){-1===i.config.allowedVisibilities.indexOf(e.id)&&0!==i.config.allowedVisibilities.length||i.visibilities.push(e)})),this.facetsLoading=!1;case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleBrowseMediaClicked:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.mediaModalOpen=!0,this.prepareDomForModal(),this.fetchFacets();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleFileInputChange:function(){this.fetchFacets(),this.uploadModalOpen=!0,this.newFile=this.$refs.fileUploadInput.files.item(0)}},watch:{selectedImage:function(){this.$emit("selectedImageChanged",this.selectedImage)}},mounted:function(){this.$nextTick((function(){var e=document.querySelector(".ngrm-model-portal-".concat(this.fieldId));document.body.prepend(e)}))}},nt=st,ot=Object(I["a"])(nt,r,c,!1,null,null,null),lt=ot.exports,rt={bind:function(e,t,a){var i=b(t.arg);a.context[i]=t.value}},ct=(a("b39d"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedFolder,expression:"selectedFolder"}],attrs:{type:"hidden",name:e.config.inputFields.folder},domProps:{value:e.selectedFolder},on:{input:function(t){t.target.composing||(e.selectedFolder=t.target.value)}}}),e.selectedFolder?a("span",[a("i",{staticClass:"fa fa-folder"}),e._v(" "+e._s(this.selectedFolder))]):a("span",[a("i",[e._v(e._s(this.config.translations.select_folder_interaction_empty))])]),a("div",{staticClass:"ngremotemedia-buttons"},[e.selectedFolder?a("input",{attrs:{type:"button",value:"Remove folder"},on:{click:e.handleFolderRemove}}):e._e(),a("input",{attrs:{type:"button",value:this.config.translations.select_folder_interaction_button},on:{click:e.handleSelectFolderModalOpen}})]),e.selectFolderModalOpen?a("modal",{attrs:{title:"Select folder"},on:{close:e.handleSelectFolderModalClose}},[a("select-folder",{attrs:{config:e.config,"selected-folder":e.selectedFolder},on:{select:e.handleFolderSelect}})],1):e._e()],1)}),dt=[],ft={name:"SelectFolderInteraction",props:["config","selectedFolder"],components:{"select-folder":He,modal:re},data:function(){return{selectFolderModalOpen:!1}},methods:{handleSelectFolderModalOpen:function(){this.selectFolderModalOpen=!0},handleSelectFolderModalClose:function(){this.selectFolderModalOpen=!1},handleFolderSelect:function(e){this.selectedFolder=e,this.handleSelectFolderModalClose()},handleFolderRemove:function(){this.selectedFolder=null}}},ut=ft,pt=Object(I["a"])(ut,ct,dt,!1,null,null,null),ht=pt.exports;i["default"].config.productionTip=!1,i["default"].use(n.a),i["default"].use(l.a);var mt=function(e){window["ngrm_interactions_vue_".concat(e.dataset.id)]=new i["default"]({el:e,directives:{init:rt},data:{config:{mode:"field",paths:{browse_resources:"/resource/browse",upload_resources:"/resource/upload",load_facets:"/facets/load",load_folders:"/folder/load",create_folder:"/folder/create"},translations:{},inputFields:{locationId:"locationId",remoteId:"remoteId",type:"type",altText:"altText",caption:"caption",tags:"tags[]",cropSettings:"cropSettings",source:"source",watermarkText:"watermarkText",cssClass:"cssClass",selectedVariation:"selectedVariation"},availableVariations:[],allowedVisibilities:[],allowedTypes:[],allowedTags:[],parentFolder:null,folder:null,uploadContext:{},disableUpload:!1,hideFilename:!1},selectedImage:{id:"",name:"",type:"image",format:"",url:"",browse_url:"",previewUrl:"",alternateText:"",caption:"",watermarkText:"",tags:[],size:"",variations:{},height:0,width:0,selectedVariation:null,cssClass:""}},components:{interactions:lt}})},gt=function(e){window["ngrm_select_folder_vue_".concat(e.dataset.id)]=new i["default"]({el:e,directives:{init:rt},data:{config:{paths:{load_folders:"/folder/load",create_folder:"/folder/create"},translations:{},inputFields:{folder:"folder"}},selectedFolder:null},components:{"select-folder-interaction":ht}})},vt=function(){for(var e=document.getElementsByClassName("ngremotemedia-container"),t=0;t<e.length;t++){var a=e[t];null!==a.querySelector("interactions")&&mt(a)}for(var i=document.getElementsByClassName("ngremotemedia-select-folder-container"),s=0;s<i.length;s++){var n=i[s];null!==n.querySelector("select-folder-interaction")&&gt(n)}},bt=document.body?document.body:document,_t={attributes:!0,childList:!0,subtree:!0},wt=new MutationObserver(vt);"complete"===document.readyState||"loading"!==document.readyState&&document.documentElement.doScroll,wt.observe(bt,_t)},"5af5":function(e,t,a){"use strict";var i=a("2d36"),s=a.n(i);s.a},7397:function(e,t,a){"use strict";var i=a("bff8"),s=a.n(i);s.a},"85ab":function(e,t,a){"use strict";var i=a("1c87"),s=a.n(i);s.a},"8b09":function(e,t,a){},a301:function(e,t,a){"use strict";var i=a("fd05"),s=a.n(i);s.a},ab92:function(e,t,a){"use strict";var i=a("3601"),s=a.n(i);s.a},b39d:function(e,t){Array.prototype.difference||(Array.prototype.difference=function(e){return this.filter((function(t){return e.indexOf(t)<0}))})},bdd7:function(e,t,a){"use strict";var i=a("8b09"),s=a.n(i);s.a},bdf2:function(e,t,a){"use strict";var i=a("d0ba"),s=a.n(i);s.a},bff8:function(e,t,a){},c345:function(e,t,a){"use strict";var i=a("1994"),s=a.n(i);s.a},c66d:function(e,t,a){"use strict";var i=a("e7f6"),s=a.n(i);s.a},d0ba:function(e,t,a){},dca1:function(e,t,a){},e7f6:function(e,t,a){},fd05:function(e,t,a){}});
//# sourceMappingURL=app.js.map